
# Домашнее задание к занятию 3. «Введение. Экосистема. Архитектура. Жизненный цикл Docker-контейнера»

## Как сдавать задания

Обязательны к выполнению задачи без звёздочки. Их нужно выполнить, чтобы получить зачёт и диплом о профессиональной переподготовке.

Задачи со звёздочкой (*) — дополнительные задачи и/или задачи повышенной сложности. Их выполнять не обязательно, но они помогут вам глубже понять тему.

Домашнее задание выполните в файле readme.md в GitHub-репозитории. В личном кабинете отправьте на проверку ссылку на .md-файл в вашем репозитории.

Любые вопросы по решению задач задавайте в чате учебной группы.

---


## Важно

Перед отправкой работы на проверку удаляйте неиспользуемые ресурсы.
Это нужно, чтобы не расходовать средства, полученные в результате использования промокода.

Подробные рекомендации [здесь](https://github.com/netology-code/virt-homeworks/blob/virt-11/r/README.md).

---

## Задача 1

Сценарий выполнения задачи:

- создайте свой репозиторий на https://hub.docker.com;
    Создал  
- выберите любой образ, который содержит веб-сервер Nginx;
    Выбрал  
- создайте свой fork образа;
    Форкнул  
- реализуйте функциональность:
запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
```
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m DevOps Engineer!</h1>
</body>
</html>
```

Опубликуйте созданный fork в своём репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.

Ответ:  https://hub.docker.com/repository/docker/michail77/nginx/  

## Задача 2

Посмотрите на сценарий ниже и ответьте на вопрос:
«Подходит ли в этом сценарии использование Docker-контейнеров или лучше подойдёт виртуальная машина, физическая машина? Может быть, возможны разные варианты?»

Детально опишите и обоснуйте свой выбор.

--

Сценарий:

- высоконагруженное монолитное Java веб-приложение;  
    T.к. для высоконагруженного приложения требуется много ресурсов, то возможно использование физической машины (возможно повышение общей производительности путем замены элементов, не справляющихся с работой, на более мощные и быстродействующие).  

- Nodejs веб-приложение;  
    Подойдет Docker, так как это веб-платформа с подключаемыми внешними библиотеками  

- мобильное приложение c версиями для Android и iOS;  
    Т.к. требуется пользовательский интерфейс, то виртуальная машина  

- шина данных на базе Apache Kafka;  
    Использование контейнеров в проектах с шиной данных на базе Apache Kafka, так же выгодно, это позволяет быстро разворачивать приложения на основных и тестовых серверах, и при необходимости быстро восстановить или откатить изменения.  

- Elasticsearch-кластер для реализации логирования продуктивного веб-приложения — три ноды elasticsearch, два logstash и две ноды kibana;  
    Можно развернуть в Docker контейнерах (есть официальные Docker-образы)  

- мониторинг-стек на базе Prometheus и Grafana;  
    Docker, т.к. легко масштабируется  

- MongoDB как основное хранилище данных для Java-приложения;  
    Физический или виртуальный сервер, т.к. существует вероятности потери данных при потере контейнера  

- Gitlab-сервер для реализации CI/CD-процессов и приватный (закрытый) Docker Registry.  
    Подойдет физический или виртуальный сервер, в зависимости от свободных ресурсов.  


## Задача 3

- Запустите первый контейнер из образа ***centos*** c любым тегом в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера.  
    root@localhost ~]# docker ps  
    CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES  
    [root@localhost ~]# docker run -v /data:/data -dt --name centos centos  
    93e4979359a4c45a045881acae91451e9191672e0e248a05b13c7f6734b48f2e  


- Запустите второй контейнер из образа ***debian*** в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера.  
    [root@localhost ~]# docker run -v /data:/data -dt --name debian debian  
    2e927c9cf7f8824aeca63fa2418057b8002b8e569a2e49a1221e148a2a9124cc  

    [root@localhost ~]# docker ps  
    CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS          PORTS     NAMES  
    2e927c9cf7f8   debian    "bash"        56 seconds ago   Up 55 seconds             debian  
    93e4979359a4   centos    "/bin/bash"   2 minutes ago    Up 2 minutes              centos  

- Подключитесь к первому контейнеру с помощью ```docker exec``` и создайте текстовый файл любого содержания в ```/data```.  
    [root@localhost ~]# docker exec -it centos /bin/sh  
    sh-4.4# echo '5.3 Docker' >/data/testfile  
    sh-4.4# cat /data/testfile  
    5.3 Docker  
    sh-4.4# exit  

- Добавьте ещё один файл в папку ```/data``` на хостовой машине.  
    [root@localhost ~]# echo 'testfile localhost' >/data/localhost  
    [root@localhost ~]# cat /data/localhost  
    testfile localhost  

- Подключитесь во второй контейнер и отобразите листинг и содержание файлов в ```/data``` контейнера.  
    [root@localhost ~]# docker exec -it debian /bin/sh  
    # ls -la /data  
    total 16  
    drwxr-xr-x. 2 root root 78 Apr 24 20:14 .  
    drwxr-xr-x. 1 root root 18 Apr 24 20:00 ..  
    -rw-r--r--. 1 root root 19 Apr 24 20:14 localhost  
    -rw-r--r--. 1 root root 13 Apr 19 19:26 readme.md  
    -rw-r--r--. 1 root root 16 Apr 19 19:28 readme_host.md  
    -rw-r--r--. 1 root root 11 Apr 24 20:06 testfile  
    # cat /data/testfile  
    5.3 Docker  
    # cat /data/localhost  
    testfile localhost  


## Задача 4 (*)

Воспроизведите практическую часть лекции самостоятельно.

Соберите Docker-образ с Ansible, загрузите на Docker Hub и пришлите ссылку вместе с остальными ответами к задачам.


---

### Как cдавать задание

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---

